/** xj.operate(判断操作方式) | V0.5.0 | Apache Licence 2.0 | 2016-2021 © XJ.Chen | https://github.com/xjZone/xj.operate */
!function(a,b){"function"!=typeof define||void 0===define.amd&&void 0===define.cmd?"undefined"!=typeof module&&"object"==typeof exports?module.exports=b():(a=a||self,a.xj||(a.xj={}),a.xj.operate=b()):define(b)}(this,function(){"use strict";var a,b,c,d,e,f,h,i,j,k,n,o,p,q,r,s,t;return!function(){a=function(a,b){var c,d;return a.classList?a.classList.contains(b):(c=a.getAttribute("class"),d=c?c.split(/\s+/):[],-1===d.indexOf(b)?!1:!0)},b=function(a,b){var c,d;return a.classList?a.classList.add(b):(c=a.getAttribute("class"),d=c?c.split(/\s+/):[],0===d.length?a.setAttribute("class",b):-1===d.indexOf(b)&&a.setAttribute("class",d.join(" ")+" "+b),void 0)},c=function(a,b){var c,d;return a.classList?a.classList.remove(b):(c=a.getAttribute("class"),d=c?c.split(/\s+/):[],c="",-1!==d.indexOf(b)&&(d.forEach(function(a){a!==b&&(c+=a+" ")}),a.setAttribute("class",c.trim())),void 0)}}(),d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof self?self:global,e=function(){},f="0.5.0",h={classTarget:document.documentElement,existClass:"xj-operate-exist",mouseClass:"xj-operate-mouse",touchClass:"xj-operate-touch",otherClass:"xj-operate-other",frequency:10,duration:1e3,mouseCallback:e,touchCallback:e,otherCallback:e},i={},void 0===d.xj&&(d.xj={}),void 0===d.xj.operateReturn&&(d.xj.operateReturn={}),void 0!==d.xj.operateReturn[f]?d.xj.operateReturn[f]:(void 0===d.xj.operateConfig&&(d.xj.operateConfig={}),void 0===d.xj.operateOption&&(d.xj.operateOption={}),void 0!==d.xj.operateConfig[f]&&Object.keys(d.xj.operateConfig[f]).forEach(function(a){h[a]=d.xj.operateConfig[f][a]}),void 0!==d.xj.operateOption[f]&&Object.keys(d.xj.operateOption[f]).forEach(function(a){i[a]=d.xj.operateOption[f][a]}),j=d,k=j.document,k.documentElement,k.body,n=0,o=Date.now(),p=0,q=new Array,r=function(a){a&&a.isTrusted===!1||t.touchSet()},s=function(a){a&&a.isTrusted===!1||(n=o,o=(new Date).getTime(),q.push(o-n),q.length<h.frequency||(q.forEach(function(a){p+=a}),p<=h.duration&&t.mouseSet(),p=0,q=[]))},t={version:f,mouse:!1,touch:!1,other:!1,mouseSet:e,touchSet:e,otherSet:e},t.mouseSet=function(a){n=o,o=Date.now(),p=0,q=[],void 0===a&&(a=!0),(h.mouseCallback===e||h.mouseCallback(a)!==!1)&&(t.mouse=!0,t.touch=!1,t.other=!1,b(h.classTarget,h.mouseClass),c(h.classTarget,h.touchClass),c(h.classTarget,h.otherClass),a===!0?(k.removeEventListener("mousemove",s,!0),k.addEventListener("touchstart",r,!0)):(k.removeEventListener("mousemove",s,!0),k.removeEventListener("touchstart",r,!0)))},t.touchSet=function(a){n=o,o=Date.now(),p=0,q=[],void 0===a&&(a=!0),(h.touchCallback===e||h.touchCallback(a)!==!1)&&(t.mouse=!1,t.touch=!0,t.other=!1,c(h.classTarget,h.mouseClass),b(h.classTarget,h.touchClass),c(h.classTarget,h.otherClass),a===!0?(k.addEventListener("mousemove",s,!0),k.removeEventListener("touchstart",r,!0)):(k.removeEventListener("mousemove",s,!0),k.removeEventListener("touchstart",r,!0)))},t.otherSet=function(a){n=o,o=Date.now(),p=0,q=[],void 0===a&&(a=!0),(h.otherCallback===e||h.otherCallback(a)!==!1)&&(t.mouse=!1,t.touch=!1,t.other=!0,c(h.classTarget,h.mouseClass),c(h.classTarget,h.touchClass),b(h.classTarget,h.otherClass),a===!0?(k.addEventListener("mousemove",s,!0),k.addEventListener("touchstart",r,!0)):(k.removeEventListener("mousemove",s,!0),k.removeEventListener("touchstart",r,!0)))},null!==h.classTarget&&""!==h.existClass&&b(h.classTarget,h.existClass),"ontouchstart"in j==!0?t.touchSet():t.mouseSet(),d.xj.operateReturn[f]=t)});
